.\" Generated by scdoc 1.11.2
.\" Complete documentation for this program is not available as a GNU info page
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.nh
.ad l
.\" Begin generated content:
.TH "swaybar-protocol" "7" "2022-09-02"
.P
.SH NAME
.P
swaybar-protocol - JSON status line protocol for swaybar
.P
.SH SUMMARY
.P
swaybar defines the following JSON protocol to specify what information is
displayed in the status line on the right side of swaybar.\& The protocol
comprises a header, that is a JSON object, followed by a newline (\fB0x0A\fR),
followed by an infinite JSON array that represents the information to display.\&
All communication is done by writing the status line to standard output and
reading events from standard input.\&
.P
.SH HEADER
.P
The header is a JSON object with support for the following properties (only
\fIversion\fR is required):
.TS
allbox;c c c c
c c c l
c c c l
c c c l
c c c l.
T{
\fBPROPERTY\fR
T}	T{
\fBDATA TYPE\fR
T}	T{
\fBDEFAULT\fR
T}	T{
\fBDESCRIPTION\fR
T}
T{
version
T}	T{
integer
T}	T{
-
T}	T{
The protocol version to use.\& Currently, this must be \fB1\fR
T}
T{
click_events
T}	T{
boolean
T}	T{
false
T}	T{
Whether to receive click event information to standard input
T}
T{
cont_signal
T}	T{
integer
T}	T{
SIGCONT
T}	T{
The signal that swaybar should send to continue processing
T}
T{
stop_signal
T}	T{
integer
T}	T{
SIGSTOP
T}	T{
The signal that swaybar should send to stop processing
T}
.TE
.sp 1
.SS MINIMAL HEADER
.nf
.RS 4
{
	"version": 1
}
.fi
.RE
.P
.SS FULL HEADER
.nf
.RS 4
{
	"version": 1,
	"click_events": true,
	"cont_signal": 18,
	"stop_signal": 19
}
.fi
.RE
.P
.SH BODY
.P
The body is an infinite array, where each element of the array is a
representation of the status line at the time that the element was written.\&
Each element of the array is itself an array of JSON objects, where each
object represents a block in the status line.\& Each block can have the following
properties (only \fIfull_text\fR is required):
.P
.TS
allbox;c c c
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l.
T{
\fBPROPERTY\fR
T}	T{
\fBDATA TYPE\fR
T}	T{
\fBDESCRIPTION\fR
T}
T{
full_text
T}	T{
string
T}	T{
The text that will be displayed.\& \fBIf missing, the block will be skipped.\&\fR
T}
T{
short_text
T}	T{
string
T}	T{
If given and the text needs to be shortened due to space, this will be displayed instead of \fIfull_text\fR
T}
T{
color
T}	T{
string
T}	T{
The text color to use in #RRGGBBAA or #RRGGBB notation
T}
T{
background
T}	T{
string
T}	T{
The background color for the block in #RRGGBBAA or #RRGGBB notation
T}
T{
border
T}	T{
string
T}	T{
The border color for the block in #RRGGBBAA or #RRGGBB notation
T}
T{
border_top
T}	T{
integer
T}	T{
The height in pixels of the top border.\& The default is 1
T}
T{
border_bottom
T}	T{
integer
T}	T{
The height in pixels of the bottom border.\& The default is 1
T}
T{
border_left
T}	T{
integer
T}	T{
The width in pixels of the left border.\& The default is 1
T}
T{
border_right
T}	T{
integer
T}	T{
The width in pixels of the right border.\& The default is 1
T}
T{
min_width
T}	T{
integer or string
T}	T{
The minimum width to use for the block.\& This can either be given in pixels or a string can be given to allow for it to be calculated based on the width of the string.\&
T}
T{
align
T}	T{
string
T}	T{
If the text does not span the full width of the block, this specifies how the text should be aligned inside of the block.\& This can be \fIleft\fR (default), \fIright\fR, or \fIcenter\fR.\&
T}
T{
name
T}	T{
string
T}	T{
A name for the block.\& This is only used to identify the block for click events.\& If set, each block should have a unique \fIname\fR and \fIinstance\fR pair.\&
T}
T{
instance
T}	T{
string
T}	T{
The instance of the \fIname\fR for the block.\& This is only used to identify the block for click events.\& If set, each block should have a unique \fIname\fR and \fIinstance\fR pair.\&
T}
T{
urgent
T}	T{
boolean
T}	T{
Whether the block should be displayed as urgent.\& Currently swaybar utilizes the colors set in the sway config for urgent workspace buttons.\& See \fBsway-bar\fR(5) for more information on bar color configuration.\&
T}
T{
separator
T}	T{
boolean
T}	T{
Whether the bar separator should be drawn after the block.\& See \fBsway-bar\fR(5) for more information on how to set the separator text.\&
T}
T{
separator_block_width
T}	T{
integer
T}	T{
The amount of pixels to leave blank after the block.\& The separator text will be displayed centered in this gap.\& The default is 9 pixels.\&
T}
T{
markup
T}	T{
string
T}	T{
The type of markup to use when parsing the text for the block.\& This can either be \fIpango\fR or \fInone\fR (default).\&
T}
.TE
.sp 1
Other properties may be given and swaybar will ignore any property that it does
not know.\& It is recommended to prefix any custom properties with an underscore
to make it easier to distinguish them from protocol properties.\&
.P
.SS BODY EXAMPLE
.P
.nf
.RS 4
[
	[
		{
			"full_text": "25%",
			"min_width": "100%",
			"urgent": false
		},
		{
			"full_text": "Thu 30 May 2019 02:15:15"
		}
	],
	[
		{
			"full_text": "20%",
			"min_width": "100%",
			"urgent": false
		},
		{
			"full_text": "Thu 30 May 2019 02:20:52"
		}
	],
	[
		{
			"full_text": "15%",
			"min_width": "100%",
			"urgent": true
		},
		{
			"full_text": "Thu 30 May 2019 02:25:41"
		}
	],
	\&.\&.\&.
.fi
.RE
.P
.SS FULL BLOCK EXAMPLE
.nf
.RS 4
{
	"full_text": "Thu 30 May 2019 02:09:15",
	"short_text": "02:09",
	"color": "#ccccccff",
	"background": "#111111ff",
	"border": "#222222ff",
	"border_top": 1,
	"border_bottom": 1,
	"border_left": 1,
	"border_right": 1,
	"min_width": 100,
	"align": "center",
	"name": "clock",
	"instance": "edt",
	"urgent": false,
	"separator": true,
	"separator_block_width": 5,
	"markup": "none"
}
.fi
.RE
.P
.SH CLICK EVENTS
.P
If requested in the header, swaybar will write a JSON object, that can be read
from standard in, when the user clicks on a block.\& The event object will have
the following properties:
.P
.TS
allbox;c c c
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l
c c l.
T{
\fBPROPERTY\fR
T}	T{
\fBDATA TYPE\fR
T}	T{
\fBDESCRIPTION\fR
T}
T{
name
T}	T{
string
T}	T{
The name of the block, if set
T}
T{
instance
T}	T{
string
T}	T{
The instance of the block, if set
T}
T{
x
T}	T{
integer
T}	T{
The x location that the click occurred at
T}
T{
y
T}	T{
integer
T}	T{
The y location that the click occurred at
T}
T{
button
T}	T{
integer
T}	T{
The x11 button number for the click.\& If the button does not have an x11 button mapping, this will be \fI0\fR.\&
T}
T{
event
T}	T{
integer
T}	T{
The event code that corresponds to the button for the click
T}
T{
relative_x
T}	T{
integer
T}	T{
The x location of the click relative to the top-left of the block
T}
T{
relative_y
T}	T{
integer
T}	T{
The y location of the click relative to the top-left of the block
T}
T{
width
T}	T{
integer
T}	T{
The width of the block in pixels
T}
T{
height
T}	T{
integer
T}	T{
The height of the block in pixels
T}
.TE
.sp 1
\fBDifferences from i3bar'\&s protocol:\fR
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
\fIbutton\fR may be \fI0\fR for buttons that do not have x11 button mappings
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
\fIevent\fR has been introduced to allow for non-x11 buttons to be represented
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
The \fImodifiers\fR property is not currently added by swaybar

.RE
.P
.SS EXAMPLE
.P
.nf
.RS 4
{
	"name": "clock",
	"instance": "edt",
	"x": 1900,
	"y": 10,
	"button": 1,
	"event": 274,
	"relative_x": 100,
	"relative_y": 8,
	"width": 120,
	"height": 18
}
.fi
.RE
.P
.SH SEE ALSO
.P
\fBsway-bar\fR(5)
